(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(2),r=n(10),s=n.n(r),i=n(6),o=n(3),u=n.n(o),l=n(5),d=n(4),b=n(12),j=n(11),p=(n(19),Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(null),r=Object(d.a)(n,2),s=r[0],i=r[1];Object(c.useImperativeHandle)(t,(function(){return{openModal:function(){return o()},closeModal:function(){return u()}}}));var o=function(){i(!0)},u=function(){i(!1)};return s?Object(a.jsxs)("div",{className:"modal-wrapper",children:[Object(a.jsx)("div",{onClick:u,className:"modal-backdrop"}),Object(a.jsx)("div",{className:"modal-box",children:e.children})]}):null})));var f=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useState)(!1),s=Object(d.a)(r,2),o=s[0],f=s[1],h=Object(c.useState)(""),O=Object(d.a)(h,2),m=O[0],v=O[1],x=Object(c.useState)(""),k=Object(d.a)(x,2),N=k[0],_=k[1],y=Object(c.useState)(""),g=Object(d.a)(y,2),w=g[0],S=g[1],C=Object(c.useState)("disabledOption"),T=Object(d.a)(C,2),J=T[0],E=T[1],P=Object(c.useState)(""),A=Object(d.a)(P,2),B=A[0],D=A[1],M=Object(c.useState)([]),R=Object(d.a)(M,2),I=R[0],U=R[1],F=Object(c.useState)([]),H=Object(d.a)(F,2),L=H[0],W=H[1],q=Object(c.useState)({}),z=Object(d.a)(q,2),G=z[0],K=z[1];Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/buckets");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,U(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/tasks");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,W(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);var Q=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!w){e.next=15;break}return"disabledOption"===(n=J)&&(n=""),a={bucket_name:n,task_name:w},e.next=8,fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 8:return c=e.sent,e.next=11,c.json();case 11:r=e.sent,(s=Object(i.a)(L)).push(r),W(s);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.error(e.t0);case 20:S(""),E("disabledOption");case 22:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(u.a.mark((function e(t){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("/api/buckets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucket_name:B})});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,(c=Object(i.a)(I)).push(a),U(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:D("");case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/tasks",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:t})});case 3:n=Object(i.a)(L).filter((function(e){return e._id!==t})),W(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(l.a)(u.a.mark((function e(n){var a,c,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a={_id:G._id,task_name:m,bucket_name:N},e.next=5,fetch("/api/tasks",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return c=e.sent,e.next=8,c.json();case 8:r=e.sent,s=Object(i.a)(L).map((function(e){return e._id===a._id?r:e})),W(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:t.current.closeModal();case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var t=Object(l.a)(u.a.mark((function t(n){var a,c,r,s,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!o),a=!!e.current.checked&&e.current.checked,c={_id:n,task_isCompleted:a},t.prev=3,t.next=6,fetch("/api/tasks/toggle",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 6:return r=t.sent,t.next=9,r.json();case 9:s=t.sent,console.log(s),l=Object(i.a)(L).map((function(e){return e._id===n?s:e})),W(l),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("div",{className:"buckets container",children:[Object(a.jsx)("h2",{children:"Buckets"}),Object(a.jsx)("ul",{className:"buckets-list",children:I.map((function(e){var t=e._id,n=e.bucket_name;return Object(a.jsx)("li",{className:"bucket-name",children:n},t)}))}),Object(a.jsxs)("form",{className:"bucketForm",onSubmit:V,children:[Object(a.jsx)("input",{type:"text",className:"bucketInput",placeholder:"new bucket","aria-label":"new bucket name",value:B,onChange:function(e){return D(e.target.value)}}),Object(a.jsx)("button",{className:"btn create","aria-label":"create new bucket",children:"+"})]})]}),Object(a.jsxs)("div",{className:"todo-container container",children:[Object(a.jsx)("h1",{children:"What's the Plan for Today?"}),Object(a.jsx)("div",{className:"todo-form-container",children:Object(a.jsxs)("form",{onSubmit:Q,children:[Object(a.jsxs)("div",{className:"form-fields",children:[Object(a.jsx)("input",{type:"text",placeholder:"Enter a new task",value:w,onChange:function(e){return S(e.target.value)}}),Object(a.jsxs)("select",{className:"label-todo",value:J,onChange:function(e){return E(e.target.value)},children:[Object(a.jsx)("option",{value:"disabledOption",disabled:!0,children:"Add Bucket"}),I.map((function(e){var t=e.bucket_name,n=e._id;return Object(a.jsx)("option",{className:"label-option",value:t,children:t},n)}))]})]}),Object(a.jsx)("div",{className:"todo-btn",children:Object(a.jsx)("button",{children:"Add Task"})})]})}),Object(a.jsx)("div",{className:"todo-list",children:Object(a.jsx)("div",{className:"tasks",children:L.map((function(c){var r=c._id,s=c.task_name,u=c.bucket_name,l=c.task_isCompleted;return Object(a.jsxs)("div",{className:"task-container",children:[Object(a.jsxs)("div",{className:"task",children:[Object(a.jsxs)("div",{className:"task-input-label",children:[Object(a.jsx)("input",{type:"checkbox",ref:e,id:r,defaultChecked:l||o,onChange:function(){return Z(r)}}),Object(a.jsxs)("label",{htmlFor:r,children:[Object(a.jsx)("span",{className:"custom-checkbox"}),s]})]}),Object(a.jsx)("span",{children:u})]}),Object(a.jsxs)("div",{className:"icons",children:[Object(a.jsx)(j.a,{className:"edit-icon",onClick:function(){return function(e){K(Object(i.a)(L).filter((function(t){return t._id===e}))[0]);var a=Object(i.a)(L).filter((function(t){return t._id===e}))[0];v(a.task_name),""===a.bucket_name?_("disabledOption"):_(a.bucket_name),t.current.openModal(),console.log(n)}(r)}}),Object(a.jsx)(b.a,{className:"delete-icon",onClick:function(){return X(r)}})]})]},r)}))})})]}),Object(a.jsx)(p,{ref:t,children:Object(a.jsx)("div",{className:"modal-form",children:Object(a.jsxs)("form",{onSubmit:Y,children:[Object(a.jsxs)("div",{className:"form-fields",children:[Object(a.jsx)("input",{type:"text",placeholder:"update existing task",value:m,ref:n,onChange:function(e){return v(e.target.value)}}),Object(a.jsxs)("select",{className:"label-todo",value:N,onChange:function(e){return _(e.target.value)},children:[Object(a.jsx)("option",{value:"disabledOption",disabled:!0,children:"Add Bucket"}),I.map((function(e){var t=e.bucket_name,n=e._id;return Object(a.jsx)("option",{className:"label-option",value:t,children:t},n)}))]})]}),Object(a.jsx)("div",{className:"todo-btn",children:Object(a.jsx)("button",{children:"Update Task"})})]})})})]})};s.a.render(Object(a.jsx)(f,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3ce0a0e8.chunk.js.map